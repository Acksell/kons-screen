<head>
<meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<style>
h1 {font-size:40px;text-align: center;}
p {font-size:30px;text-align: center;}
</style>
</head>

<h1>Socket app</h1>
<p>Fetches time from server every 10 seconds and embeds some facebook posts.</p>
<h1 id="time"><h1>

<!-- Socket logic -->

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" charset="utf-8">
    var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function() {
        socket.emit("update")
        console.log("Connected.")
    });

    socket.on('server response', function(msg) {
        console.log("Server responded!")
        console.log("Time is: " + msg.time)
        $('#time').text("Time: " + msg.time); // modify html document
        socket.emit("update")  // grab another update, server will sleep for 10s.
    });
</script>

<!-- Facebook embedding -->

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/sv_SE/sdk.js#xfbml=1&version=v2.11&appId=1700333769985107';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- Social media feed -->

{% block facebook %}
{% endblock %}
